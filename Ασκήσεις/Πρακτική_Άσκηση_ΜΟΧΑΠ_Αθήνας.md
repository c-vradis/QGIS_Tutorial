# Πρακτική άσκηση με το QGIS  
## Χαρτογραφική σύνθεση με την ταξινομική ανάλυση των ΜΟ.Χ.Α.Π. της μητροπολιτικής περιοχής της Αθήνας

Αντικείμενο της εργασίας αυτής είναι η **σύνταξη ενός θεματικού χάρτη από πολλές μεταβλητές μέσω ταξινομικής ανάλυσης** για το απογραφικό έτος **2011** ο οποίος θα απεικονίζει τις ΜΟ.Χ.Α.Π. της ευρύτερης περιοχής της Αθήνας (οι ΜΟ.Χ.Α.Π. επεξηγούνται σε επόμενη παράγραφο), «συνδυάζοντας» τις παρακάτω κατηγορίες μεταβλητών:

1. Υπήκοοι ανεπτυγμένων οικονομικά κρατών (στήλες `"Nat\_Fr"`, `"Nat\_GER"`, `"Nat\_USA"`, `"Nat\_UK"`, `"Nat\_IT"`, `"Nat\_CYP"`, `"Nat\_POL"`)
2. Άτομα με έως και Κατώτερη Δευτεροβάθμια εκπαίδευση (ISCED 0-2) (στήλες: `"Edu\_Isc10"`, `"Edu\_Isc2"`)
3. Διαθέσιμη επιφάνεια κατοικίας έως και 15 τ.μ. / άτομο (στήλες: `"Hous\_sqrmpp1"`, `"Hous\_sqrmpp2"`).

Τα δεδομένα για τις 3 παραπάνω κατηγορίες μεταβλητές προέρχονται από τον ιστότοπο [**AthensSocialAtlas**](https://www.athenssocialatlas.gr) και συγκεκριμένα από το άρθρο με τίτλο ["**Ανισότητες και διαχωρισμοί στην Αθήνα: Χάρτες και δεδομένα**"](https://www.athenssocialatlas.gr/άρθρο/ανισότητες-και-διαχωρισμοί-στην-αθήν/), των θωμά Μαλούτα και Σταύρου-Νικηφόρου Σπυρέλλη.

Ο συνδυασμός των παραπάνω μεταβλητών θα γίνει μέσω της **ταξινομικής ανάλυσης**, μια διαδικασία η οποία θα κατατάξει κάθε ΜΟ.Χ.Α.Π. σε μια "συστάδα" (cluster), με στόχο την δημιουργία μιας κοινωνικής τυπολογίας του ευρύτερου αθηναϊκού χώρου. Ο αριθμός των clusters θα αποτελέσει επιλογή του εκπαιδευόμενου/ης και καλό είναι να κυμαίνεται μεταξύ 5 και 7. 

Στη συνέχεια, κάθε cluster θα πρέπει να αναγνωρισθεί ως προς την πληθυσμιακή του σύνθεση και να αποδοθεί μια **κατάλληλη ονομασία** που θα το χαρακτηρίζει (στην τελευταία παράγραφο παρατίθενται ορισμένα παραδείγματα). 

Τόσο η χαρτοσύνθεση και η ταξινομική ανάλυση θα εκπονηθούν στο περιβάλλον του QGIS. Οι βασικές έννοιες και τα επιμέρους βήματα της εργασίας παρουσιάζονται αναλυτικά στις παραγράφους που ακολουθούν.

# Συνοπτική περιγραφή των βημάτων της εργασίας

1. *Δημιουργία τοπικού καταλόγου εργασίας* όπου θα αποθηκευθούν όλα τα αρχεία της εργασίας.
2. *Τηλεφόρτωση των απαιτούμενων δεδομένων από το AthensSocialAtlas*. Εναλλακτικά, μπορεί να τηλεφορτωθεί ένα συμπιεσμένο αρχείο (.zip) στο οποίο περιλαμβάνεται:
    1. το αρχείο project του QGIS,
    1. το shapefile των ΜΟ.Χ.Α.Π. καθώς και 
    1. όλα τα απαιτούμενα συνοδευτικά αρχεία CSV και CSVT (για τη φόρτωση των αρχείων CSV με τον επιθυμητό τύπο πεδίων).
    Υπόψη ότι στο παραπάνω συμπιεσμένο αρχείο, και συγκεκριμένα στο αρχείο project του QGIS, το shapefile έχει ήδη συνενωθεί με τα αρχεία CSV.
3. Το επόμενο βήμα είναι η *δημιουργία επιμέρους χωροπληθών χαρτών για κάθε μία μεταβλητή*, ώστε να οπτικοποιηθεί το χωρικό τους μοτίβο.
4. *Διενέργεια της ταξινομικής ανάλυσης* με βάση τα ποσοστά της κάθε μεταβλητής. Στο τέλος της διαδικασίας γίνεται αυτόματη προσθήκη νέου πεδίου με τον κωδικό του cluster.
5. Δημιουργία τελικού χάρτη και χαρτοσύνθεσης με βάση τις τιμές από το νέο πεδίο το οποίο περιέχει τον κωδικό του cluster. Για τη χαρτοσύνθεση θα πρέπει να αποφασισθεί το είδος και το επίπεδο των δεδομένων προς χαρτογράφηση: πρόκειται για ποιοτικά, ιεραρχικά ή ποσοτικά δεδομένα; Από την απάντηση αυτή θα εξαρτηθεί η ορθή επιλογή της οπτικής μεταβλητής που θα χρησιμοποιεί ο τελικός χάρτης (που μπορεί να είναι η απόχρωση, η φωτεινότητα, ο κορεσμός, ή συνδυασμός αυτών). Στη χαρτοσύνθεση θα πρέπει απαραίτητα να ενσωματωθεί ένα κατάλληλο χαρτογραφικό υπόβαθρο (όπως π.χ. αυτό από το OpenStreepMap).

# Η Ελληνική Στατιστική Αρχή (ΕΛΣΤΑΤ) και οι γεωχωρικές μονάδες αναφοράς που χρησιμοποιεί

Η ΕΛΣΤΑΤ έχει ως αποστολή τη συστηματική παραγωγή επίσημων στατιστικών, καθώς και τη διενέργεια επιστημονικών ερευνών και την κατάρτιση μελετών, οι οποίες:

- αφορούν όλους τους τομείς της δραστηριότητας του δημοσίου και του ιδιωτικού τομέα,
- υποστηρίζουν τη διαδικασία λήψης αποφάσεων, χάραξης και αξιολόγησης πολιτικών της Κυβέρνησης και των φορέων του Δημοσίου (δείκτες αξιολόγησης),
- υποβάλλονται σε διεθνείς φορείς σύμφωνα με τις υποχρεώσεις της χώρας και,
- αφορούν στο γενικό κοινό ή κατηγορίες χρηστών στατιστικών στοιχείων στο εσωτερικό ή στο εξωτερικό.

Η ΕΛΣΤΑΤ συντονίζει και διενεργεί τις απογραφές πληθυσμού κάθε 10 έτη. Η τελευταία απογραφή πληθυσμού έγινε το **2021**. Για τους σκοπούς της παρουσίασης και ανάλυσης των απογραφικών δεδομένων, η ΕΛΣΤΑΤ χρησιμοποιεί τα παρακάτω επίπεδα χωρικής αναφοράς:

- Αποκεντρωμένες Διοικήσεις
- Περιφέρειες
- Περιφερειακές Ενότητες
- Καλλικρατικοί Δήμοι
- Δημοτικές Ενότητες
- Δημοτικές - Τοπικές Κοινότητες
- Οικισμοί

Κάποια από τα παραπάνω επίπεδα, συμπίπτουν και με τα ομώνυμα διοικητικά. Κάτω από το επίπεδο των οικισμών, η ΕΛΣΤΑΤ χρησιμοποιεί τους **Απογραφικούς Τομείς** και τα **Απογραφικά Τετράγωνα:** κάθε Απογραφικός Τομέας αποτελείται από δύο ή περισσότερα απογραφικά τετράγωνα. Η διαθεσιμότητα των Τομέων και των Τετραγώνων περιορίζεται γεωγραφικά καλύπτοντας 1.142 οικισμούς της Ελλάδος για το απογραφικό έτος 2011 και 609 οικισμούς για το απογραφικό έτος 2001.

# Τι είναι οι ΜΟ.Χ.Α.Π.;

Πρόκειται για μια σχετικά νέα κατηγορία **Κοινωνικοοικονομικής Μονάδας** **#1** που δημιουργήθηκε στο πλαίσιο ανάπτυξης και υλοποίησης του Πανοράματος Απογραφικών Δεδομένων ώστε να διευκολυνθεί αφενός η δημοσίευση στατιστικών στοιχείων και αφετέρου η παραγωγή αντίστοιχων θεματικών χαρτών στον Παγκόσμιο Ιστό. 

Οι **ΜΟ.Χ.Α.Π.** (ΜΟνάδες Χωρικής Ανάλυσης Πόλης) έχουν δημιουργηθεί από συνενώσεις Απογραφικών Τετραγώνων (ΑΤ) της ΕΛΣΤΑΤ στην ευρύτερη μητροπολιτική περιοχής της κάθε πόλης με πληθυσμό άνω των 50.000 κατοίκων. Με άλλα λόγια, οι μονάδες αυτές έχουν προκύψει από την **εννοιολογική γενίκευση** μονάδων χαμηλότερου επιπέδου και συγκροτούνται είτε από μοναδικούς είτε από δύο ή περισσότερους γειτονικούς Απογραφικούς Τομείς (ΑΤ) ή Απογραφικά Τετράγωνα, ώστε κάθε ΜΟ.Χ.Α.Π. έχει πληθυσμό της τάξης των 1.000 ατόμων. Έτσι λοιπόν, το Απογραφικό Πανόραμα στο οποίο χρησιμοποιούνται οι ΜΟ.Χ.Α.Π., παρέχει τη δυνατότητα χαρτογράφησης στο εσωτερικό όλων των ελληνικών πόλεων άνω των 50.000 κατοίκων σε επίπεδο Μονάδων Χωρικής Ανάλυσης Πόλεων (ΜΟ.Χ.Α.Π.), δηλαδή συνολικά για 24 πόλεις: 

- Αγρίνιο
- Αθήνα
- Αλεξανδρούπολη
- Βέροια
- Βόλος
- Δράμα
- Ηράκλειο
- Θεσσαλονίκη
- Ιωάννινα
- Καβάλα
- Καλαμάτα
- Κατερίνη
- Κοζάνη
- Κομοτηνή
- Κόρινθος
- Λάρισα
- Λαμία
- Ξάνθη
- Πάτρα
- Ρόδος
- Σέρρες
- Τρίκαλα
- Χαλκίδα
- Χανιά

Με τη συνένωση των ΑΤ και τη δημιουργία των ΜΟ.Χ.Α.Π., διασφαλίζεται το απαιτούμενο επίπεδο εμπιστευτικότητας δεδομένων που τίθεται από τη ισχύουσα νομοθεσία. Συγκεκριμένα, η ανάγκη δημιουργίας των ΜΟ.Χ.Α.Π. προέκυψε εξαιτίας περιορισμών που θέτουν κάποιοι νομικοί κανόνες εμπιστευτικότητας που διέπουν την παροχή των στατιστικών δεδομένων σύμφωνα με το Νόμο 3832/2010 της ΕΛΣΤΑΤ (όπως αυτός ισχύει).

Η παρούσα εργασία εστιάζει αποκλειστικά στην **Αθήνα** και την ευρύτερη μητροπολιτική της περιοχή. Στο στιγμιότυπο οθόνης παρουσιάζεται η περιοχή του κέντρου της Αθήνας. Τα Απογραφικά Τετράγωνα (ΑΤ) εμφανίζονται με λεπτό μαύρο περίγραμμα ενώ οι ΜΟ.Χ.Α.Π. με έντονο μαύρο.

# Η πολυμεταβλητή ανάλυση

Ο συνηθισμένος και κύριος στόχος ενός χωροπληθούς χάρτη είναι η ανάδειξη της γεωγραφικής δομής ενός φαινομένου με εύληπτο τρόπο. Όμως δεν είναι πάντα οπτικά αποτελεσματική η σύνταξη μικτών/σύνθετων χωροπληθών χαρτών χρησιμοποιώντας πάνω από δύο μεταβλητές. Για αυτούς τους λόγους στην παρούσα άσκηση θα χρησιμοποιηθεί η **πολυμεταβλητή ανάλυση** για τη σύνθεση ενός θεματικού χάρτη πολλών μεταβλητών. Με την πολυμεταβλητή ανάλυση θα μπορέσουμε να μετατρέψουμε, μέσω στατιστικής επεξεργασίας ομαδοποίησης, μια σειρά μεταβλητών σε μια νέα, συνθετική, μεταβλητή που θα μπορεί να απεικονιστεί σε ένα χάρτη ως "μονοδιάστατο" γεωγραφικό φαινόμενο.

## Ταξινομική Ανάλυση (cluster analysis) με τον αλγόριθμο k-means

Για τις ανάγκες της εργασίας θα χρησιμοποιηθεί μια ιδιαίτερη μέθοδος πολυμεταβλητής ανάλυσης η **ταξινομική ανάλυση** (cluster analysis). Πρόκειται για ένα είδος πολυμεταβλητής ανάλυσης που χρησιμοποιείται για τη σύνθεση δεδομένων, με στόχο τη χαρτογράφηση του φαινομένου στο οποίο αναφέρονται. Η ταξινομική ανάλυση μπορεί να εφαρμοσθεί σε διάφορα είδη δεδομένων, γεωγραφικά και μη. Χρησιμοποιείται εκτεταμένα στη γεωγραφία όπου υπάρχει συστηματική ανάγκη ταξινόμησης διαφόρων γεωγραφικών οντοτήτων (π.χ., Περιφερειακές Ενότητες, Δήμοι, πολύγωνα ΜΟ.Χ.Α.Π.) στις οποίες έχουν καταγραφεί μια ή περισσότερες μεταβλητές (π.χ. κάποια από τα δημογραφικά και κοινωνικά χαρακτηριστικά τους). Ειδικότερα, αποτελεί ένα σημαντικό εργαλείο για την Κοινωνική Γεωγραφία αφού βοηθάει στον εντοπισμό των κοινωνικών φαινομένων και των μοτίβων τους στο χώρο.

## Πως ορίζεται η ταξινομική ανάλυση

Στη γενική της έκφραση ο στόχος της ταξινομικής ανάλυσης είναι να διαχωρίσει:

- ένα σύνολο από *n* αντικείμενα
- σε *k* ομάδες (clusters), όπου *k* \>1
- χρησιμοποιώντας *p* αριθμό μεταβλητών, όπου *p* \> 0

## Στόχος της ταξινομικής ανάλυσης

Στόχος της ταξινομικής ανάλυσης είναι η δημιουργία ομοιογενών ομάδων. Εφαρμόζοντας την ταξινομική ανάλυση στα δεδομένα της εργασίας θα διαχωρισθούν οι ΜΟ.Χ.Α.Π. της ευρύτερης περιοχής της Αθήνας με βάση τις τιμές των δημογραφικών τους μεταβλητών (και συγκεκριμένα με τα ποσοστά), σε φυσικές (όπως τις ονομάζουμε) **ομάδες** (clusters) ώστε:

- κάθε ομάδα (cluster) να έχει όσο το δυνατόν όμοιες μεταξύ τους τιμές (ελαχιστοποίηση ενδοομαδικής μεταβλητότητας),
- οι τιμές που ανήκουν σε διαφορετικές ομάδες (clusters) να είναι όσο το δυνατό ανόμοιες

## Επιλογή αλγορίθμου της ταξινομικής ανάλυσης

Υπάρχουν αρκετοί τρόποι για τη δημιουργία αυτών των ομάδων. Ένας από αυτούς είναι ο αλγόριθμος **k-means** που χρησιμοποιείται εκτεταμένα στη Στατιστική, στη Γεωγραφία και στη Χωρική Ανάλυση και κατ' επέκταση και στη Θεματική Χαρτογραφία. Χρησιμοποιείται επίσης στην Τεχνητή Νοημοσύνη και στη Μηχανική Μάθηση (Machine Learning). Τα πλεονεκτήματα της ταξινομικής ανάλυσης με τον αλγόριθμο k-means είναι ότι:

- δεν είναι απαραίτητο να κάνουμε εκ των προτέρων υποθέσεις για την κατανομή των τιμών των μεταβλητών μας σε σχέση με τη χωρική τους υπόσταση. Το μόνο απαραίτητο στοιχείο είναι ο καθορισμός του επιθυμητού αριθμού ομάδων.
- δεν είναι απαραίτητο να γνωρίζουμε εκ των προτέρων τα χαρακτηριστικά που διαφοροποιούν κάθε ομάδα. Ο αλγόριθμος με επαναληπτικό τρόπο (iterations) εκτιμάει το μέσο όρο κάθε ομάδας και κατατάσσει κάθε μέλος (στην περίπτωσή μας το πολύγωνο κάθε ΜΟ.Χ.Α.Π.) σε μια από τις ομάδες που δημιουργούνται. Με τον τρόπο αυτό, κάθε ΜΟ.Χ.Α.Π. θα καταταχθεί σε κάποια ομάδα με βάση το συνδυασμό των μεταβλητών που χρησιμοποιήθηκαν.

Οι ομάδες αυτές αναμένεται να δημιουργήσουν ευρύτερες γεωγραφικές περιοχές. Εντός των ευρύτερων περιοχών οι ΜΟ.Χ.Α.Π. θα έχουν κάποια ομοιογενή χαρακτηριστικά Στόχος είναι ο εντοπισμός χωρικών ενοτήτων (ομάδων) με ομοιογενή χαρακτηριστικά (όπως π.χ. περιοχών «γκέτο»). Ιδιαίτερο ενδιαφέρον έχει το γεγονός ότι αν έχουμε μία μεταβλητή, η εφαρμογή του αλγορίθμου k-means παράγει αποτέλεσμα σχεδόν όμοιο με τη μέθοδο του Jenks (γνωστή και ως μέθοδος Φυσικών Διακοπών ή Natural Breaks).

## Τρόπος λειτουργίας του αλγόριθμου k-means

O αλγόριθμος k-means λειτουργεί επαναληπτικά: αρχικά τοποθετεί τυχαία σημεία (που θα παίξουν τον ρόλο των κεντροειδών), τα οποία είναι ισάριθμα του επιθυμητού αριθμού ομάδων. Αρχικά, για κάθε έναν συνδυασμό παρατηρήσεων υπολογίζεται το πλησιέστερο κέντρο και η **μέση τιμή** των αποστάσεων (εξού και το όνομα του αλγορίθμου). Έτσι δημιουργούνται οι πρώτες ομάδες. Στο επόμενο βήμα, για κάθε ομάδα υπολογίζεται το πραγματικό της κεντροειδές και μετατοπίζεται εκεί το αρχικό σημείο. Η διαδικασία επαναλαμβάνεται έως ότου η μετακίνηση των κεντροειδών είναι αμελητέα.

Ο τρόπος με τον οποίο λειτουργεί και παράγει αποτέλεσμα μπορεί να οπτικοποιηθεί γραφικά όταν έχουμε δύο ή τρεις το πολύ μεταβλητές (δισδιάστατος ή τρισδιάστατος χώρος) ενώ είναι δύσκολο (και μάλλον αδύνατο) να οπτικοποιηθεί για τέσσερεις ή περισσότερες μεταβλητές (τετραδιάστατος/πολυδιάστατος χώρος). Ο πλέον δόκιμος τρόπος για την οπτικοποίηση είναι όταν έχουμε το συνδυασμό 2 μεταβλητών: αφήνουμε το γεωγραφικό χώρο και τον χώρο του χάρτη και μεταφερόμαστε στον χώρο ενός δισδιάστατου γραφήματος. Ο ένας άξονας χρησιμοποιείται για την 1η μεταβλητή και ο άλλος για τη 2η. Επιλέγονται τυχαία k σημεία που θα λειτουργήσουν ως «κεντροειδή» για τα clusters. Γίνεται επανάληψη των παρακάτω βημάτων:

- Για κάθε σημείο στο γράφημα υπολογίζεται η ευκλείδεια απόσταση από τα όλα κεντροειδή ώστε να βρεθεί το πλησιέστερο.
- Αφού ολοκληρωθεί ο υπολογισμός για όλα τα σημεία, κάθε σημείο θα ανήκει σε ένα cluster
- Υπολογίζονται εκ νέου τα κεντροειδή

Σε κάθε επανάληψη μετατοπίζονται τα κεντροειδή. Επαναλαμβάνονται τα παραπάνω βήματα όσες φορές χρειαστεί και ο αλγόριθμος σταματάει όταν δεν αλλάζει η κατάταξη των σημείων. Μπορείτε να δείτε την οπτικοποίηση της παραπάνω επαναληπτικής διαδικασίας στα παρακάτω βίντεο:

- [https://www.youtube.com/watch?v=gSt4\_kcZPxE](https://www.youtube.com/watch?v=gSt4_kcZPxE)
- [https://www.youtube.com/watch?v=BVFG7fd1H30](https://www.youtube.com/watch?v=BVFG7fd1H30)

## Λογισμικά που υποστηρίζουν ταξινομική ανάλυση

- STATA ([https://www.stata.com](https://www.stata.com/))
- SPSS ([https://www.ibm.com/analytics/spss-statistics-software](https://www.ibm.com/analytics/spss-statistics-software))
- Matlab ([https://www.mathworks.com/help/stats/kmeans.html](https://www.mathworks.com/help/stats/kmeans.html))
- R ([https://www.r-bloggers.com/k-means-clustering-in-r/](https://www.r-bloggers.com/k-means-clustering-in-r/))
- Πρόσθετο του QGIS με την ονομασία "Attribute based clustering" ([http://www.ekazakov.info/projects/abc\_tutorial.html](http://www.ekazakov.info/projects/abc_tutorial.html))

# Δημιουργία χωροπληθών χαρτών

Στη συνέχεια μπορούμε να παράξουμε τον απαραίτητο αριθμό χωροπληθών χαρτών. Η εργασία μπορεί να γίνει με τη χρήση του τελικού shapefile και μόνον, αφού αυτό περιέχει τα απαραίτητα πεδία χωρίς να χρειάζεται συνένωση με τα CSV.

## Προσθήκη χαρτογραφικού υποβάθρου

Κάθε χαρτοσύνθεση με κεντρικό περιεχόμενο έναν θεματικό χάρτη, οφείλει να περιλαμβάνει ένα κατάλληλο χαρτογραφικό υπόβαθρο. Καθώς η σύνθεση ενός υποβάθρου είναι χρονοβόρα εργασία, επιδιώκουμε την αναζήτηση έτοιμων δεδομένων, συνήθως υπό τη μορφή διαδικτυακών χαρτών. Τέτοια λεπτομερή χαρτογραφικά υπόβαθρα υπάρχουν διαθέσιμα από διάφορες διαδικτυακές υπηρεσίες όπως η Google, η Bing, το OpenStreetMap, τα πλακίδια Stamen. κ.α. Κάποια από αυτά υπόκεινται σε περιορισμούς χρήσης ή/και πρόσβασης (π.χ. απαιτείται κάποιο APIkey, μπορεί να επιβάλλεται περιορισμός στο πλήθος προβολών, κ.α.). Για να προσθέσουμε ένα χαρτογραφικό υπόβαθρο από αυτές τις διαδικτυακές υπηρεσίες χρειάζεται να εγκαταστήσουμε το πρόσθετο (plugin) **OpenLayers** στο QGIS. Εναλλακτικά, μπορούμε να χρησιμοποιήσουμε το plugin **HCMGIS**. Ακολουθούν ορισμένα στιγμιότυπα οθόνης με τη διαδικασία προσθήκης υποβάθρου και τις απαραίτητες ρυθμίσεις για την αισθητικότερη ενσωμάτωσή του.

Για να απεικονίσουμε το υπόβαθρο σε κλίμακα του γκρι, πηγαίνουμε στις ιδιότητες του επιπέδου (δεξί κλικ) και στην ενότητα `Color rendering` -\> `Grayscale` διαλέγουμε μία από τις επιλογές (π.χ. `By luminosity`). Προκειμένου να μην αποκρύπτεται το υπόβαθρο από τον θεματικό χάρτη, μπορούμε είτε να αυξήσουμε τη διαφάνεια του θεματικού χάρτη ή να επιλέξουμε μια από τις μεθόδους ανάμιξης επιπέδων (π.χ. `Darken`) με ιδιαίτερη προσοχή.

Αν προσθέσουμε χαρτογραφικό υπόβαθρο από κάποια διαδικτυακή υπηρεσία, θα πρέπει να το αναφέρουμε ως πηγή δεδομένων στη χαρτοσύνθεσή μας (π.χ. αν χρησιμοποιήσουμε το OpenStreetMap προσθέτουμε το κείμενο σε ένα κατάλληλο σημείο της χαρτοσύνθεσης: **"Χαρτογραφικό υπόβαθρο: © Συνεισφέροντες του OpenStreetMap"** (για λεπτομέρειες βλ. [https://www.openstreetmap.org/copyright](https://www.openstreetmap.org/copyright)).

## Εφαρμογή ταξινομικής ανάλυσης

Η ταξινομική ανάλυση μπορεί να διενεργηθεί με τη βοήθεια διαφόρων λογισμικών (βλ. προηγούμενη παράγραφο). Ένα από αυτά είναι το πρόσθετο "Attribute-based clustering" στο περιβάλλον του QGIS. Η εγκατάσταση του γίνεται από το κυρίως μενού -\> `Plugins` -\> `Manage and install plugins`, όπου πληκτρολογούμε το όνομα του προσθέτου, το επιλέγουμε και επιλέγουμε `Install Plugin`.

Στη συνέχεια, από το κυρίως μενού επιλέγουμε `Vector` -\> `Attribute based clustering` -\> `Attribute based clustering`

Στο παράθυρο διαλόγου που ακολουθεί, εφαρμόζουμε τις παρακάτω ρυθμίσεις:

- επιλέγουμε ως Vector Layer το shapefile των ΜΟ.Χ.Α.Π. (`MOXAP\_Athens\_KALCODE1`)
- για κάθε πεδίο το οποίο θέλουμε να συμμετάσχει στην ανάλυση, το επιλέγουμε από την επιλογή "`Fields`" και με το πλήκτρο "---\>" το προσθέτουμε στη δεξιά στήλη.
- Επιλέγουμε τον επιθυμητό αριθμό clusters (για την περίπτωσή της συγκεκριμένης άσκησης από 5 έως 7)
- Στο πεδίο "`Output field name`" εισάγουμε την ονομασία της στήλης που θα προστεθεί στο shapefile, η οποία θα περιέχει τον αναγνωριστικό κωδικό του cluster

Τέλος, κάνουμε κλικ στο πλήκτρο "`Run`". Με την ολοκλήρωση της διαδικασίας, θα έχει προστεθεί μια νέα στήλη στον πίνακα ιδιοτήτων του shapefile, η οποία θα περιέχει τον αναγνωριστικό κωδικό του cluster για κάθε πολύγωνο ΜΟ.Χ.Α.Π.

## Η λογική της τυπολογίας των ΜΟ.Χ.Α.Π.

Μετά την ολοκλήρωση της εφαρμογής της ταξινομικής ανάλυσης, εξαιρετικά σημαντικό βήμα αποτελεί η αναγνώριση των clusters που δημιουργούνται. Το πλέον κρίσιμο σημείο της εργασίας είναι η **ονοματοδοσία** των clusters καθώς πρέπει να αποδοθεί ένα όνομα σε κάθε cluster, λαμβάνοντας υπόψη τα χαρακτηριστικά της. Μπορεί (και πιθανά να χρειαστεί) να παραχθούν επιμέρους χωροπληθείς χάρτες για κάθε μία μεταβλητή (για κάθε μία στήλη ποσοστού) προκειμένου να καταλάβει κανείς τις "συμπεριφορές", δηλαδή τα χωρικά μοτίβα, των επιμέρους μεταβλητών σε κάθε cluster. Αν παραχθούν επιμέρους χωροπληθείς χάρτες, μπορούν προαιρετικά να ενταχθούν στην χαρτοσύνθεση (αν και αυτό δεν είναι υποχρεωτικό).

Για τον τελικό χάρτη θα χρησιμοποιηθεί και πάλι το χρώμα ως η κύρια οπτική μεταβλητή και συγκεκριμένα:

- η απόχρωση
- η ένταση
- συνδυασμός των δύο

Για να χρησιμοποιήσουμε την κατάλληλη οπτική μεταβλητή, πρέπει να γνωρίζουμε σε ποιο επίπεδο μέτρησης ανήκουν τα δεδομένα που περιγράφουν τους clusters:

- Πρόκειται για **ποιοτικά** δεδομένα; Τότε μια κατάλληλη οπτική μεταβλητή είναι η απόχρωση.
- Πρόκειται για **ιεραρχικά** δεδομένα; Κατάλληλη οπτική μεταβλητή είναι η απόχρωση σε συνδυασμό με την ένταση.
- Πρόκειται για αριθμητικά, **συνεχή** δεδομένα; Κατάλληλη μεταβλητή είναι η ένταση.

Μετά την εφαρμογή της ταξινομικής ανάλυσης, κάθε ΜΟ.Χ.Α.Π. θα ανήκει σε ένα cluster, στον οποίο θα έχει αποδοθεί ένας κωδικός αριθμός προκειμένου να τον ξεχωρίζουμε από τους άλλους. Αυτός ο αριθμός αποτελεί απλά την «ετικέτα» (label) της ομάδας. Θα μπορούσε να έχει αποδοθεί ένα αλφαριθμητικό (π.χ. "Cluster A", "Cluster B" κ.ο.κ.). Προσοχή σε αυτό το σημείο: η κατάταξη των δεδομένων δεν θα γίνει με βάση τον κωδικό του cluster αλλά με βάση το όνομα που θα αποδοθεί! Δηλαδή, αν και οι κωδικοί αριθμοί που έχουν αποδοθεί σε κάθε cluster μπορεί να είναι 1,2,3... αυτό δεν σημαίνει ότι τα δεδομένα μας είναι ποσοτικά/αριθμητικά!

Για τη διευκόλυνση στην αναγνώριση και στην ονοματοδοσία των clusters που παρήγαγε η ταξινομική ανάλυση, παραθέτουμε μερικά παραδείγματα από το βιβλίο "**Κοινωνικός και Οικονομικός Άτλας της Ελλάδας**", τόμος 1ος: οι Πόλεις" (Μαλούτας Θ., Πανταζής Π., ΕΚΚΕ, 2000), το οποίο είναι διαθέσιμο σε ψηφιακή μορφή στον σύνδεσμο: [http://www.ekke.gr/open\_books/atlas.pdf](http://www.ekke.gr/open_books/atlas.pdf%5C). Πριν την ολοκλήρωση της παρούσας εργασίας, μπορείτε να συμβουλευθείτε το άρθρο με τίτλο ["**Ανισότητες και διαχωρισμοί στην Αθήνα: Χάρτες και δεδομένα**"](https://www.athenssocialatlas.gr/άρθρο/ανισότητες-και-διαχωρισμοί-στην-αθήν/), των Θ. Μαλούτα και Σ. Ν. Σπυρέλλη.

Για την χαρτοσύνθεση ισχύουν οι κανόνες που έχουν παρουσιασθεί σε άλλες εργασίες, οπότε στην παρούσα εργασία τοποθετούμε τα απαραίτητα δομικά στοιχεία (τίτλος, ονομασία πόλης, έτος, φαινόμενο που χαρτογραφούμε, γραφική κλίμακα, κ.λπ.). Η τελική χαρτοσύνθεση (ή χαρτοσυνθέσεις) θα δημιουργηθούν ως ενιαίο αρχείο PDF.

# Ενδεικτική βιβλιογραφία και πηγές:

1. ΕΚΚΕ-ΕΛΣΤΑΤ (2015) Πανόραμα Απογραφικών Δεδομένων 1991-2011. Διαδικτυακή εφαρμογή για την πρόσβαση, επεξεργασία και χαρτογράφηση απογραφικών δεδομένων ([http://panorama.statistics.gr](http://panorama.statistics.gr/)).

2. Μαλούτας Θ., Σπυρέλλης Σ., (2019), Ανισότητες και διαχωρισμοί στην Αθήνα: Χάρτες και δεδομένα, στο Μαλούτας Θ., Σπυρέλλης Σ. (επιμ.) Κοινωνικός άτλαντας της Αθήνας. Ηλεκτρονική συλλογή κειμένων και εποπτικού υλικού ([https://www.athenssocialatlas.gr/άρθρο/ανισότητες-και-διαχωρισμοί-στην-αθήν/](https://www.athenssocialatlas.gr/%CE%AC%CF%81%CE%B8%CF%81%CE%BF/%CE%B1%CE%BD%CE%B9%CF%83%CF%8C%CF%84%CE%B7%CF%84%CE%B5%CF%82-%CE%BA%CE%B1%CE%B9-%CE%B4%CE%B9%CE%B1%CF%87%CF%89%CF%81%CE%B9%CF%83%CE%BC%CE%BF%CE%AF-%CF%83%CF%84%CE%B7%CE%BD-%CE%B1%CE%B8%CE%AE%CE%BD/))

3. Τεκμηρίωση QGIS και εγχειρίδιο χρήσης: [https://docs.qgis.org/2.18/en/docs/training\_manual/](https://docs.qgis.org/2.18/en/docs/training_manual/)

4. Εισαγωγή στο STATA: [https://www.cpc.unc.edu/research/tools/data\_analysis/statatutorial/](https://www.cpc.unc.edu/research/tools/data_analysis/statatutorial/)

5. Υλικό από παρουσιάσεις και εργασίες στο μάθημα της Θεματικής Χαρτογραφίας (διδάσκων: Θωμάς Μαλούτας, εργαστηριακοί βοηθοί: Χριστόφορος Βραδής, Νικολίνα Μυωφά)

6. K-means clustering with R: [https://www.datacamp.com/community/tutorials/k-means-clustering-r](https://www.datacamp.com/community/tutorials/k-means-clustering-r)

7. Attribute based clustering plugin for QGIS short manual: [http://www.ekazakov.info/projects/abc\_tutorial.html](http://www.ekazakov.info/projects/abc_tutorial.html)

8. Κάβουρας, Μ., Δάρρα, Α., Κόκλα, Μ., Κονταξάκη, Σ., Πανόπουλος, Γ., Τομαή, Ε. 2016. Ειδικά Θέματα Χωρικής Ανάλυσης - Κοινωνικοοικονομικές Μονάδες. [Κεφάλαιο Συγγράμματος]. Στο Κάβουρας, Μ., Δάρρα, Α., Κόκλα, Μ., Κονταξάκη, Σ., Πανόπουλος, Γ., Τομαή, Ε. 2016. Επιστήμη Γεωγραφικής Πληροφορίας - Ολοκληρωμένη Προσέγγιση και Ειδικά Θέματα. [ηλεκτρ. βιβλ.] Αθήνα:Σύνδεσμος Ελληνικών Ακαδημαϊκών Βιβλιοθηκών. κεφ 5. Διαθέσιμο στο: http://hdl.handle.net/11419/6378

9. Κάτσιος, Ι., Τσάτσαρης, Α. "Διαλέξεις θεματικής χαρτογραφίας", εκδόσεις Δίσιγμα, 2014, ISBN 978-960-9495-44-8) 

10. Σημειώσεις Θεματικής Χαρτογραφίας, Θωμάς Μαλούτας και Παναγιώτης Πανταζής, 1998

11. Μαλούτας Θ., Πανταζής Π., "Κοινωνικός και Οικονομικός Άτλας της Ελλάδας, τόμος 1ος: οι Πόλεις", ΕΚΚΕ, 2000, διαθέσιμο σε ψηφιακή μορφή από τον σύνδεσμο: [http://www.ekke.gr/open\_books/atlas.pdf](http://www.ekke.gr/open_books/atlas.pdf)

12. Μαλούτας, Θ. (2018) Η κοινωνική γεωγραφία της Αθήνας. Κοινωνικές ομάδες και δομημένο περιβάλλον σε μια νοτιοευρωπαϊκή μητρόπολη, Αθήνα, Εκδόσεις Αλεξάνδρεια.